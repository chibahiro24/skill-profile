# スキルプロファイル管理システム 要件定義書

## 1. プロジェクト概要

### 1.1 プロジェクト名
スキルプロファイル管理システム（Skill Profile）

### 1.2 目的
**全職種の個人が、日々の活動から客観的にスキルを可視化し、透明性のあるアルゴリズムでキャリアパスを発見できるプラットフォームを提供する。**

個人がデータのOwnershipを持ち、柔軟なアクセス制御により、プライバシーを保護しながらキャリア形成を支援する。フェアネスと透明性を最重要視し、すべてのアルゴリズムを公開することで、信頼されるキャリアプラットフォームを実現する。

### 1.3 背景
- 従来の職務経歴書は主観的で更新が煩雑
- **特に非技術職では、スキルが可視化されにくい**
- スキル情報が各企業・サービスに分散し、ポータビリティがない
- 客観的な証跡に基づくスキル評価のニーズ
- **ブラックボックスなレコメンデーションへの不信感**
- 個人情報保護の重要性の高まり
- キャリアの流動性が高まる中、継続的なスキル管理の必要性
- **アルゴリズムバイアスによる不公平な評価への懸念**

### 1.4 ターゲットユーザー
- **個人ユーザー（全職種）**: 
  - エンジニア、デザイナー
  - **営業、マーケティング、人事、財務、経営企画**
  - **マネージャー、経営層**
  - **スキルが見えにくい職種の人々**
  - 学生、フリーランス
- **企業ユーザー**: 採用担当者、人事担当者、プロジェクトマネージャー
- **教育機関**: 学生のスキル育成・管理を支援する大学や専門学校

### 1.5 他サービスとの差別化要素
1. **オープンアルゴリズム**: すべてのレコメンデーションアルゴリズムを公開
2. **全職種対応**: エンジニアだけでなく、全ての職種のソフトスキル・ハードスキルを評価
3. **透明性のあるキャリアパス推奨**: なぜその推奨なのかを明確に説明
4. **フェアネス保証**: バイアス検出・補正の仕組みを公開
5. **コミュニティガバナンス**: ユーザーがアルゴリズム改善に参加可能

---

## 2. システム概要

### 2.1 システムの特徴
1. **個人のデータOwnership**: ユーザーが自身のデータを完全にコントロール
2. **客観的データ重視**: 資格、証明書、活動ログ等の証跡ベース
3. **柔軟なアクセス制御**: 項目別・期限付きのアクセス権限管理
4. **ポータビリティ**: データエクスポート・インポート機能
5. **プライバシーファースト**: GDPR・個人情報保護法準拠

### 2.2 システム構成
```
[クライアント層]
- Webアプリケーション（React/Vue.js）
- モバイルアプリ（iOS/Android）
- 公開プロファイルページ

[API層]
- RESTful API
- GraphQL API（オプション）
- 認証・認可サーバー

[ビジネスロジック層]
- ユーザー管理
- スキル管理
- アクセス制御
- データ分析・推奨エンジン

[データ層]
- メインDB（PostgreSQL/MySQL）
- ドキュメントストレージ（S3互換）
- キャッシュ（Redis）
- 検索エンジン（Elasticsearch）

[外部連携]
- GitHub API
- LinkedIn API
- OAuth2.0プロバイダー
```

---

## 3. 機能要件

### 3.1 ユーザー管理機能

#### 3.1.1 ユーザー登録・認証
| 要件ID | 要件名 | 詳細 | 優先度 |
|--------|--------|------|--------|
| UR-001 | メール認証登録 | メールアドレスとパスワードでの登録 | 必須 |
| UR-002 | OAuth2.0連携 | Google、GitHub、LinkedInでのSSO | 必須 |
| UR-003 | 二段階認証 | TOTPベースの2FA | 推奨 |
| UR-004 | パスワードリセット | メール経由のパスワード再設定 | 必須 |
| UR-005 | セッション管理 | 複数デバイスでのセッション管理 | 必須 |

#### 3.1.2 プロフィール管理
| 要件ID | 要件名 | 詳細 | 優先度 |
|--------|--------|------|--------|
| UR-101 | 基本情報登録 | 氏名、生年月日、連絡先等 | 必須 |
| UR-102 | プロフィール画像 | アバター画像のアップロード | 必須 |
| UR-103 | 自己紹介 | 経歴・自己PR文の記載 | 必須 |
| UR-104 | SNSリンク | 各種SNSプロフィールへのリンク | 推奨 |

### 3.2 スキル管理機能

#### 3.2.1 スキルカテゴリ体系
本システムでは、以下の包括的なスキルカテゴリを管理する：

**ソフトスキル（ポータブルスキル）**
- コミュニケーション能力
- 時間管理・生産性
- 問題解決能力
- チームワーク・協調性
- 自己管理・成長

**リーダーシップ・マネジメント**
- リーダーシップ
- プロジェクトマネジメント
- ピープルマネジメント
- 意思決定・判断力

**ビジネス・戦略スキル**
- ビジネス理解
- 顧客志向・ステークホルダー対応
- 戦略的思考
- 財務・経済理解

**アントレプレナーシップ**
- 構想力・ビジョン策定
- 実行力・アクション志向
- リスクテイク・挑戦
- 事業開発

**経営スキル**
- 経営戦略
- 組織マネジメント
- 財務・資金管理
- リソース最適化

**ハードスキル（職種別専門スキル）**
- 技術系（プログラミング、インフラ等）
- デザイン系（UI/UX、グラフィック等）
- マーケティング系（SEO、コンテンツ等）
- 営業系（商談、提案等）
- 財務・会計系（簿記、財務分析等）
- 人事・採用系（採用、育成等）

#### 3.2.2 スキル登録・編集
| 要件ID | 要件名 | 詳細 | 優先度 |
|--------|--------|------|--------|
| SK-001 | スキル追加 | 包括的カテゴリー別のスキル登録 | 必須 |
| SK-002 | スキルレベル設定 | 100点満点での習熟度設定 | 必須 |
| SK-003 | 経験記録 | 実務経験年数・実践回数の記録 | 必須 |
| SK-004 | スキルタグ | 検索用タグの設定 | 推奨 |
| SK-005 | スキル説明 | 詳細な説明文の記載 | 推奨 |
| SK-006 | スキルグループ化 | 関連スキルのグループ管理 | 必須 |
| SK-007 | ソフトスキル重視 | 全職種共通のポータブルスキル評価 | 必須 |
| SK-008 | 職種別カスタマイズ | 職種に応じたスキル表示の最適化 | 推奨 |

#### 3.2.2 スキル証跡管理
| 要件ID | 要件名 | 詳細 | 優先度 |
|--------|--------|------|--------|
| SK-101 | 資格証明書アップロード | PDF/画像ファイルのアップロード | 必須 |
| SK-102 | 資格情報登録 | 資格名、取得日、有効期限等 | 必須 |
| SK-103 | 認証機関連携 | 公式認証機関からの自動取得 | オプション |
| SK-104 | 第三者評価 | 上司・同僚からの評価記録 | 推奨 |
| SK-105 | 証跡の公開設定 | 証明書の表示/非表示制御 | 必須 |

### 3.3 活動ログ・実績管理機能

#### 3.3.1 プロジェクト経験管理
| 要件ID | 要件名 | 詳細 | 優先度 |
|--------|--------|------|--------|
| PR-001 | プロジェクト登録 | 名称、期間、役割、規模等 | 必須 |
| PR-002 | 使用技術記録 | プロジェクトで使用した技術・ツール | 必須 |
| PR-003 | 成果物登録 | ポートフォリオ、URL、資料等 | 推奨 |
| PR-004 | チーム規模記録 | チームメンバー数、組織構成 | 推奨 |
| PR-005 | プロジェクト成果 | KPI、達成指標の記録 | 推奨 |

#### 3.3.2 学習履歴管理
| 要件ID | 要件名 | 詳細 | 優先度 |
|--------|--------|------|--------|
| LN-001 | 講座修了記録 | オンライン講座の修了証管理 | 必須 |
| LN-002 | 研修参加履歴 | 社内外研修・セミナーの記録 | 必須 |
| LN-003 | 学習時間トラッキング | 学習にかけた時間の記録 | 推奨 |
| LN-004 | 読書記録 | 技術書・ビジネス書の読書履歴 | オプション |
| LN-005 | Udemy連携 | Udemyコース修了の自動取得 | オプション |

#### 3.3.3 外部サービス連携
| 要件ID | 要件名 | 詳細 | 優先度 |
|--------|--------|------|--------|
| EX-001 | GitHub連携 | リポジトリ・コミット履歴取得 | 必須 |
| EX-002 | GitHubコントリビューション | グラフ・統計の表示 | 必須 |
| EX-003 | LinkedIn連携 | プロフィール・経歴の同期 | 推奨 |
| EX-004 | Stack Overflow連携 | レピュテーション・バッジ取得 | 推奨 |
| EX-005 | Qiita/Zenn連携 | 記事・いいね数の取得 | 推奨 |
| EX-006 | Kaggle連携 | コンペ成績・メダル取得 | オプション |

### 3.4 アクセス制御・公開設定機能

#### 3.4.1 公開レベル制御
| 要件ID | 要件名 | 詳細 | 優先度 |
|--------|--------|------|--------|
| AC-001 | プロフィール公開設定 | 全体の公開レベル設定 | 必須 |
| AC-002 | 項目別公開制御 | スキル・プロジェクト単位の制御 | 必須 |
| AC-003 | 公開URL生成 | 共有用のユニークURL発行 | 必須 |
| AC-004 | パスワード保護 | 限定公開URLへのパスワード設定 | 推奨 |
| AC-005 | 有効期限設定 | アクセス権限の期限設定 | 必須 |

#### 3.4.2 企業向けアクセス管理
| 要件ID | 要件名 | 詳細 | 優先度 |
|--------|--------|------|--------|
| AC-101 | アクセス権限付与 | 特定企業へのアクセス許可 | 必須 |
| AC-102 | アクセスログ記録 | 誰がいつ閲覧したかの記録 | 必須 |
| AC-103 | アクセス権限取り消し | 付与した権限の即時取り消し | 必須 |
| AC-104 | 閲覧通知 | プロフィール閲覧時の通知 | 推奨 |
| AC-105 | ダウンロード制御 | データダウンロードの許可制御 | 必須 |

#### 3.4.3 データエクスポート
| 要件ID | 要件名 | 詳細 | 優先度 |
|--------|--------|------|--------|
| EX-201 | PDF出力 | 職務経歴書形式のPDF生成 | 必須 |
| EX-202 | JSONエクスポート | 全データのJSON形式出力 | 必須 |
| EX-203 | CSVエクスポート | スキル一覧のCSV出力 | 推奨 |
| EX-204 | テンプレート選択 | 複数の出力フォーマット | 推奨 |
| EX-205 | API提供 | 外部サイトへの埋め込み用API | オプション |

### 3.5 データ可視化・分析機能

#### 3.5.1 スキル可視化
| 要件ID | 要件名 | 詳細 | 優先度 |
|--------|--------|------|--------|
| VZ-001 | レーダーチャート | スキル分野別の可視化 | 必須 |
| VZ-002 | スキルツリー | 階層的なスキル表示 | 推奨 |
| VZ-003 | ヒートマップ | 活動量の時系列表示 | 推奨 |
| VZ-004 | スキルマトリックス | 領域×レベルの2軸表示 | オプション |

#### 3.5.2 成長分析
| 要件ID | 要件名 | 詳細 | 優先度 |
|--------|--------|------|--------|
| AN-001 | スキル成長グラフ | 時系列でのスキル推移 | 必須 |
| AN-002 | 学習時間統計 | 月次・年次の学習時間集計 | 推奨 |
| AN-003 | 目標達成率 | 設定目標の達成度表示 | 推奨 |
| AN-004 | 強み・弱み分析 | AIによるスキル分析 | オプション |

#### 3.5.3 市場価値分析
| 要件ID | 要件名 | 詳細 | 優先度 |
|--------|--------|------|--------|
| MK-001 | 類似プロファイル比較 | 同業種・同レベルとの比較 | 推奨 |
| MK-002 | スキル需要分析 | 求人市場でのスキル需要表示 | 推奨 |
| MK-003 | 年収推定 | スキルセットからの年収推定 | オプション |
| MK-004 | トレンド分析 | 業界トレンドとの適合度 | オプション |

### 3.6 キャリア支援機能

#### 3.6.1 目標管理
| 要件ID | 要件名 | 詳細 | 優先度 |
|--------|--------|------|--------|
| GL-001 | 目標設定 | 短期・中期・長期目標の設定 | 必須 |
| GL-002 | マイルストーン管理 | 段階的な目標達成管理 | 推奨 |
| GL-003 | 進捗トラッキング | 目標に対する進捗の可視化 | 推奨 |
| GL-004 | リマインダー | 目標達成期限の通知 | 推奨 |

#### 3.6.2 学習推奨
| 要件ID | 要件名 | 詳細 | 優先度 |
|--------|--------|------|--------|
| RC-001 | スキルギャップ分析 | 目標とのギャップ可視化 | 推奨 |
| RC-002 | 学習コンテンツ推奨 | 必要スキル習得のコース推奨 | 推奨 |
| RC-003 | キャリアパス提案 | AIによる最適なキャリアパス | オプション |
| RC-004 | メンター推奨 | 学習支援者のマッチング | オプション |

#### 3.6.3 求人マッチング
| 要件ID | 要件名 | 詳細 | 優先度 |
|--------|--------|------|--------|
| JB-001 | 求人推奨 | スキルマッチする求人表示 | オプション |
| JB-002 | マッチング度表示 | 求人とのマッチ度スコア | オプション |
| JB-003 | 不足スキル表示 | 求人に必要な追加スキル | オプション |

### 3.7 企業向け機能

#### 3.7.1 採用機能
| 要件ID | 要件名 | 詳細 | 優先度 |
|--------|--------|------|--------|
| CO-001 | 候補者検索 | スキルフィルタリング検索 | 推奨 |
| CO-002 | ブックマーク | 候補者の保存・管理 | 推奨 |
| CO-003 | 候補者比較 | 複数候補者の並列比較 | 推奨 |
| CO-004 | アクセス申請 | 詳細情報へのアクセスリクエスト | 必須 |
| CO-005 | メッセージ送信 | 候補者へのメッセージ機能 | 推奨 |

#### 3.7.2 社内人材管理
| 要件ID | 要件名 | 詳細 | 優先度 |
|--------|--------|------|--------|
| HR-001 | 社員スキルマップ | 組織全体のスキル可視化 | 推奨 |
| HR-002 | スキル検索 | 社内の特定スキル保持者検索 | 推奨 |
| HR-003 | チーム編成支援 | 最適なチーム構成の提案 | オプション |
| HR-004 | 研修計画立案 | スキルギャップに基づく研修計画 | オプション |
| HR-005 | 後継者計画 | サクセッションプランニング支援 | オプション |

### 3.8 キャリアパス推奨・分析機能（透明性重視）

本システムの最大の差別化要素である、**オープンアルゴリズムによるキャリアパス推奨機能**。すべてのレコメンデーションロジックを公開し、ユーザーが検証可能な透明性を実現する。

#### 3.8.1 類似プロファイル発見
| 要件ID | 要件名 | 詳細 | 優先度 |
|--------|--------|------|--------|
| CP-001 | 類似ユーザー検索 | スキルセット・経験が類似するユーザーの発見 | 必須 |
| CP-002 | 類似度スコア算出 | 多次元での類似度計算（公開アルゴリズム） | 必須 |
| CP-003 | 類似度の説明 | なぜ類似と判定されたかの明示 | 必須 |
| CP-004 | 重み付けカスタマイズ | ユーザーが類似度の重み付けを調整可能 | 推奨 |
| CP-005 | プライバシー保護 | 類似ユーザーの匿名化表示 | 必須 |

#### 3.8.2 キャリアパス分析
| 要件ID | 要件名 | 詳細 | 優先度 |
|--------|--------|------|--------|
| CP-101 | キャリアパスマッピング | 類似ユーザーが辿ったキャリアの可視化 | 必須 |
| CP-102 | 到達期間統計 | 目標ポジションへの平均到達期間 | 必須 |
| CP-103 | 成功パターン分析 | 成功したキャリアパスの共通点抽出 | 推奨 |
| CP-104 | 複数パス提示 | 多様なキャリアパスの選択肢を提示 | 必須 |
| CP-105 | 確率表示 | 各パスの実現可能性を確率で表示 | 推奨 |

#### 3.8.3 スキルギャップ分析
| 要件ID | 要件名 | 詳細 | 優先度 |
|--------|--------|------|--------|
| CP-201 | 目標ポジション設定 | 目指すキャリアの設定 | 必須 |
| CP-202 | 必要スキル分析 | 目標に必要なスキルの特定 | 必須 |
| CP-203 | ギャップ可視化 | 現在スキルとのギャップを視覚化 | 必須 |
| CP-204 | 優先順位付け | 習得すべきスキルの優先順位表示 | 必須 |
| CP-205 | 習得難易度表示 | 各スキル習得の難易度・所要時間 | 推奨 |

#### 3.8.4 具体的アクション推奨
| 要件ID | 要件名 | 詳細 | 優先度 |
|--------|--------|------|--------|
| CP-301 | 学習リソース推奨 | オンライン講座、書籍等の推奨 | 必須 |
| CP-302 | プロジェクト提案 | スキル習得に適したプロジェクト | 推奨 |
| CP-303 | コミュニティ推奨 | 参加すべきコミュニティ・イベント | 推奨 |
| CP-304 | メンター推奨 | スキル習得を支援できる人の紹介 | オプション |
| CP-305 | タイムライン表示 | 推奨アクションの実施タイムライン | 推奨 |
| CP-306 | 成功事例提示 | 類似パスを成功した事例の紹介 | 推奨 |

#### 3.8.5 透明性・説明可能性
| 要件ID | 要件名 | 詳細 | 優先度 |
|--------|--------|------|--------|
| CP-401 | アルゴリズム公開 | 全レコメンデーションアルゴリズムの公開 | 必須 |
| CP-402 | 推奨理由の明示 | なぜその推奨なのかの詳細説明 | 必須 |
| CP-403 | データソース明示 | 使用したデータセットの情報公開 | 必須 |
| CP-404 | 信頼度スコア | 推奨の信頼度を数値で表示 | 必須 |
| CP-405 | パラメータ表示 | 使用した重み付けパラメータの表示 | 推奨 |
| CP-406 | 計算プロセス表示 | ステップバイステップの計算過程 | 推奨 |
| CP-407 | SHAP値表示 | 各要素の寄与度を可視化（説明可能AI） | オプション |

#### 3.8.6 フェアネス保証
| 要件ID | 要件名 | 詳細 | 優先度 |
|--------|--------|------|--------|
| CP-501 | バイアス検出 | データセットのバイアス分析 | 必須 |
| CP-502 | バイアス補正 | 性別・年齢等のバイアス補正 | 必須 |
| CP-503 | バイアスレポート | バイアス分析結果の公開 | 必須 |
| CP-504 | 多様性指標 | データセットの多様性指標の表示 | 推奨 |
| CP-505 | 公平性監査 | 定期的なアルゴリズム監査の実施 | 必須 |
| CP-506 | コミュニティ監査 | ユーザーによる監査参加の仕組み | 推奨 |

#### 3.8.7 ユーザーコントロール
| 要件ID | 要件名 | 詳細 | 優先度 |
|--------|--------|------|--------|
| CP-601 | 推奨オン・オフ | 推奨機能の利用・不使用を選択 | 必須 |
| CP-602 | アルゴリズム選択 | 複数のアルゴリズムから選択可能 | 推奨 |
| CP-603 | フィードバック提供 | 推奨の適切性をフィードバック | 必須 |
| CP-604 | データ利用範囲制御 | 推奨に使用されるデータの制御 | 必須 |
| CP-605 | 推奨頻度設定 | 推奨通知の頻度設定 | 推奨 |

### 3.9 AIプラグインシステム

日々の活動ログからスキルを自動的に検出・管理するAIプラグインシステム。**全職種対応**を重視し、技術職以外のスキルも幅広く検出する。

#### 3.9.1 プラグインアーキテクチャ
| 要件ID | 要件名 | 詳細 | 優先度 |
|--------|--------|------|--------|
| AI-001 | プラグインAPI | 標準化されたプラグインインターフェースの提供 | 必須 |
| AI-002 | プラグイン登録 | プラグインの登録・有効化・無効化機能 | 必須 |
| AI-003 | プラグイン設定 | プラグイン固有の設定管理 | 必須 |
| AI-004 | バージョン管理 | プラグインのバージョン互換性管理 | 必須 |
| AI-005 | サンドボックス実行 | プラグインの隔離実行環境 | 必須 |
| AI-006 | 権限管理 | プラグインごとのアクセス権限制御 | 必須 |
| AI-007 | プラグインマーケット | コミュニティプラグインの共有・検索 | 推奨 |
| AI-008 | プラグインレビュー | コミュニティによる評価・レビュー | 推奨 |
| AI-009 | 自動更新 | プラグインの自動アップデート機能 | 推奨 |
| AI-010 | プラグイン開発SDK | プラグイン開発用のSDK提供 | 必須 |
| AI-011 | 全職種対応 | 技術職以外のスキル検出にも対応 | 必須 |

#### 3.9.2 ログ収集機能（全職種対応）
| 要件ID | 要件名 | 詳細 | 優先度 |
|--------|--------|------|--------|
| LOG-001 | コミュニケーションログ | Slack、メール、会議での発言・対応記録 | 必須 |
| LOG-002 | タスク管理ログ | タスクの作成・完了・期限遵守状況 | 必須 |
| LOG-003 | ドキュメントログ | 文書作成・編集・共有の記録 | 必須 |
| LOG-004 | カレンダーログ | 会議参加・時間管理の記録 | 必須 |
| LOG-005 | AI会話ログ | ChatGPT、Claude等との会話記録 | 必須 |
| LOG-006 | 技術活動ログ | GitHub、コーディング等の技術活動 | 必須 |
| LOG-007 | 営業活動ログ | CRM、商談、提案書作成等の記録 | 推奨 |
| LOG-008 | 学習ログ | オンライン講座、読書等の学習記録 | 推奨 |
| LOG-009 | ブラウザ拡張 | Webベースツールのログ収集 | 推奨 |
| LOG-010 | ログフィルタリング | 収集対象のきめ細かいフィルタリング | 必須 |
| LOG-011 | リアルタイム収集 | リアルタイムでのログストリーミング | 推奨 |
| LOG-012 | バッチ収集 | 定期的なバッチ処理でのログ収集 | 必須 |
| LOG-013 | ログ保持期間 | ユーザー設定可能な保持期間管理 | 必須 |
| LOG-014 | 職種別最適化 | 職種に応じた収集項目の最適化 | 推奨 |

#### 3.9.3 AI自動スキル判定（全職種対応）
| 要件ID | 要件名 | 詳細 | 優先度 |
|--------|--------|------|--------|
| SKD-001 | 自然言語処理 | テキストからのスキルキーワード抽出 | 必須 |
| SKD-002 | ソフトスキル検出 | コミュニケーション、リーダーシップ等の検出 | 必須 |
| SKD-003 | 技術スキル検出 | プログラミング言語、ツール等の認識 | 必須 |
| SKD-004 | ビジネススキル検出 | 戦略、財務、営業等のスキル認識 | 必須 |
| SKD-005 | コンテキスト分析 | 文脈に基づく適切なスキル判定 | 必須 |
| SKD-006 | 行動パターン分析 | 時間管理、締切遵守等の行動スキル分析 | 必須 |
| SKD-007 | 習熟度推定 | 使用頻度・深度・複雑度からの推定 | 必須 |
| SKD-008 | 信頼度スコア | 検出結果の信頼度スコア算出 | 必須 |
| SKD-009 | 重複排除 | 同一スキルの重複検出と統合 | 必須 |
| SKD-010 | カテゴリ自動分類 | スキルの適切なカテゴリへの自動分類 | 必須 |
| SKD-011 | 関連スキル提案 | 既存スキルに基づく関連スキル提案 | 推奨 |
| SKD-012 | トレンド分析 | スキル使用のトレンド分析 | 推奨 |
| SKD-013 | 成長トラッキング | スキルレベルの時系列変化追跡 | 必須 |
| SKD-014 | 職種別検出最適化 | 職種に応じた検出精度の最適化 | 推奨 |
| SKD-015 | センチメント分析 | コミュニケーションの質を評価 | 推奨 |
| SKD-016 | 協調性分析 | チーム活動での貢献度を分析 | 推奨 |

#### 3.8.4 ユーザー承認・フィードバック
| 要件ID | 要件名 | 詳細 | 優先度 |
|--------|--------|------|--------|
| APR-001 | 検出スキル通知 | 新規検出スキルの通知 | 必須 |
| APR-002 | 一括承認 | 複数スキルの一括承認機能 | 必須 |
| APR-003 | 個別承認 | スキル単位での承認・拒否 | 必須 |
| APR-004 | スキル編集 | 検出スキルの名称・レベル編集 | 必須 |
| APR-005 | 証拠表示 | 検出根拠となったログの表示 | 必須 |
| APR-006 | フィードバック学習 | ユーザーフィードバックからの学習改善 | 推奨 |
| APR-007 | 自動承認ルール | 信頼度に基づく自動承認設定 | 推奨 |
| APR-008 | 承認履歴 | 承認・拒否の履歴管理 | 推奨 |

#### 3.9.5 対応プラットフォーム（全職種向け）

**必須対応（コミュニケーション・コラボレーション）:**
| プラットフォーム | 説明 | 対象スキル | 優先度 |
|----------------|------|-----------|--------|
| Slack/Teams | ビジネスコミュニケーション分析 | コミュニケーション、協調性、対応速度 | 必須 |
| Gmail/Outlook | メールコミュニケーション分析 | ライティング、応答性、顧客対応 | 必須 |
| Zoom/Meet | 会議参加・運営の分析 | プレゼン、リーダーシップ、会議運営 | 必須 |
| ChatGPT/Claude | AI会話からの学習・思考分析 | 問題解決、学習意欲、専門知識 | 必須 |

**必須対応（タスク・プロジェクト管理）:**
| プラットフォーム | 説明 | 対象スキル | 優先度 |
|----------------|------|-----------|--------|
| Asana/Trello/Jira | タスク管理・進捗分析 | 時間管理、計画性、完遂力 | 必須 |
| Google Calendar | スケジュール管理分析 | 時間管理、優先順位付け、会議効率 | 必須 |
| Notion/Confluence | ドキュメンテーション分析 | 記録力、整理力、知識共有 | 必須 |

**必須対応（技術職向け）:**
| プラットフォーム | 説明 | 対象スキル | 優先度 |
|----------------|------|-----------|--------|
| GitHub/GitLab | コード・レビュー活動分析 | 技術力、コードレビュー、協調性 | 必須 |
| VSCode/Cursor | コーディング活動分析 | プログラミング、生産性、学習 | 推奨 |

**推奨対応（営業・マーケティング）:**
| プラットフォーム | 説明 | 対象スキル | 優先度 |
|----------------|------|-----------|--------|
| Salesforce/HubSpot | 営業活動・顧客管理分析 | 営業力、顧客対応、提案力 | 推奨 |
| Google Analytics | データ分析・意思決定 | データ分析、マーケティング理解 | 推奨 |
| LinkedIn | ネットワーキング・情報発信 | 影響力、専門性、ブランディング | 推奨 |

**推奨対応（学習・成長）:**
| プラットフォーム | 説明 | 対象スキル | 優先度 |
|----------------|------|-----------|--------|
| Udemy/Coursera | オンライン学習履歴 | 自己学習、成長意欲、専門知識 | 推奨 |
| Kindle/読書管理 | 読書履歴・学習記録 | 知識習得、継続学習 | オプション |

**オプション（その他）:**
| プラットフォーム | 説明 | 対象スキル | 優先度 |
|----------------|------|-----------|--------|
| Local LLM | プライバシー重視のローカル処理 | 全スキル（機密環境） | 推奨 |
| カスタムプラグイン | ユーザー独自のツール連携 | カスタマイズ可能 | オプション |

#### 3.8.6 プライバシー・セキュリティ
| 要件ID | 要件名 | 詳細 | 優先度 |
|--------|--------|------|--------|
| PRI-001 | ログ暗号化 | AES-256による収集ログの暗号化 | 必須 |
| PRI-002 | ローカル処理オプション | センシティブデータのローカル処理 | 必須 |
| PRI-003 | データ最小化 | 必要最小限のログのみ収集 | 必須 |
| PRI-004 | 明示的同意 | プラグインごとの明示的な同意取得 | 必須 |
| PRI-005 | 同意撤回 | いつでも同意を撤回可能 | 必須 |
| PRI-006 | 自動削除 | 設定可能な保持期間後の自動削除 | 必須 |
| PRI-007 | 匿名化処理 | 個人情報の自動マスキング | 必須 |
| PRI-008 | アクセスログ | プラグインのデータアクセスログ記録 | 必須 |
| PRI-009 | 透明性レポート | 何が収集され、どう使われたかのレポート | 推奨 |
| PRI-010 | データエクスポート | プラグイン収集データのエクスポート | 必須 |

#### 3.8.7 分析・レポート機能
| 要件ID | 要件名 | 詳細 | 優先度 |
|--------|--------|------|--------|
| ANL-001 | 活動統計 | プラグインごとの活動統計表示 | 推奨 |
| ANL-002 | スキル検出統計 | 検出されたスキルの統計情報 | 推奨 |
| ANL-003 | 学習時間分析 | ログから推定した学習時間の分析 | 推奨 |
| ANL-004 | 活動パターン分析 | 時間帯・曜日別の活動パターン | オプション |
| ANL-005 | 生産性インサイト | 活動データからの生産性分析 | オプション |

---

## 4. 非機能要件

### 4.1 パフォーマンス要件
| 要件ID | 要件名 | 基準値 | 優先度 |
|--------|--------|--------|--------|
| NF-001 | ページ読み込み時間 | 初回3秒以内、2回目以降1秒以内 | 必須 |
| NF-002 | API応答時間 | 平均200ms以内、95パーセンタイル500ms以内 | 必須 |
| NF-003 | 同時接続ユーザー数 | 10,000ユーザー対応 | 推奨 |
| NF-004 | データベースクエリ | 単一クエリ100ms以内 | 推奨 |
| NF-005 | ファイルアップロード | 10MB以下のファイルを30秒以内 | 必須 |

### 4.2 可用性・信頼性
| 要件ID | 要件名 | 基準値 | 優先度 |
|--------|--------|--------|--------|
| NF-101 | システム稼働率 | 99.9%以上（年間ダウンタイム8.76時間以内） | 必須 |
| NF-102 | データバックアップ | 日次フルバックアップ、時次差分バックアップ | 必須 |
| NF-103 | データ復旧時間 | 障害発生から4時間以内 | 必須 |
| NF-104 | データ保持期間 | 削除依頼から90日間保持、その後完全削除 | 必須 |

### 4.3 セキュリティ要件
| 要件ID | 要件名 | 詳細 | 優先度 |
|--------|--------|------|--------|
| NF-201 | データ暗号化 | AES-256による保存データ暗号化 | 必須 |
| NF-202 | 通信暗号化 | TLS 1.3以上での通信 | 必須 |
| NF-203 | パスワードハッシュ化 | bcryptまたはArgon2によるハッシュ化 | 必須 |
| NF-204 | SQLインジェクション対策 | ORMまたはパラメータ化クエリの使用 | 必須 |
| NF-205 | XSS対策 | 入力値のサニタイズ・エスケープ処理 | 必須 |
| NF-206 | CSRF対策 | CSRFトークンの実装 | 必須 |
| NF-207 | 脆弱性診断 | 四半期に1回の脆弱性診断実施 | 推奨 |
| NF-208 | アクセス制限 | IPホワイトリスト・レート制限 | 推奨 |

### 4.4 スケーラビリティ
| 要件ID | 要件名 | 詳細 | 優先度 |
|--------|--------|------|--------|
| NF-301 | 水平スケーリング | サーバーの自動スケールアウト対応 | 必須 |
| NF-302 | データベーススケーリング | リードレプリカによる読み取り負荷分散 | 推奨 |
| NF-303 | ストレージ拡張性 | オブジェクトストレージの無制限拡張 | 必須 |
| NF-304 | キャッシング戦略 | Redis等でのキャッシュレイヤー実装 | 推奨 |

### 4.5 保守性・運用性
| 要件ID | 要件名 | 詳細 | 優先度 |
|--------|--------|------|--------|
| NF-401 | ログ記録 | アプリケーション・アクセス・エラーログ | 必須 |
| NF-402 | モニタリング | リアルタイムのシステム監視 | 必須 |
| NF-403 | アラート通知 | 異常検知時の自動通知 | 必須 |
| NF-404 | デプロイ自動化 | CI/CDパイプラインの構築 | 推奨 |
| NF-405 | ロールバック機能 | 障害時の即時ロールバック | 必須 |
| NF-406 | API versioning | 下位互換性の保持 | 必須 |

### 4.6 ユーザビリティ
| 要件ID | 要件名 | 詳細 | 優先度 |
|--------|--------|------|--------|
| NF-501 | レスポンシブデザイン | PC・タブレット・スマホ対応 | 必須 |
| NF-502 | ブラウザ対応 | Chrome、Firefox、Safari、Edge最新2バージョン | 必須 |
| NF-503 | アクセシビリティ | WCAG 2.1 レベルAA準拠 | 推奨 |
| NF-504 | 多言語対応 | 日本語・英語対応（将来的に拡張） | 推奨 |
| NF-505 | オンボーディング | 初回ユーザー向けチュートリアル | 推奨 |

### 4.7 コンプライアンス
| 要件ID | 要件名 | 詳細 | 優先度 |
|--------|--------|------|--------|
| NF-601 | GDPR対応 | EU一般データ保護規則への準拠 | 必須 |
| NF-602 | 個人情報保護法対応 | 日本の個人情報保護法への準拠 | 必須 |
| NF-603 | 利用規約 | サービス利用規約の整備 | 必須 |
| NF-604 | プライバシーポリシー | 個人情報の取り扱いポリシー | 必須 |
| NF-605 | Cookie同意 | Cookie使用への明示的同意取得 | 必須 |

---

## 5. ユースケース

### 5.1 個人ユーザーのユースケース

#### UC-001: 新規ユーザー登録
**アクター**: 未登録ユーザー
**前提条件**: なし
**基本フロー**:
1. ユーザーがサインアップページにアクセス
2. メールアドレスとパスワードを入力、またはOAuth連携を選択
3. メールアドレスの場合、確認メールが送信される
4. ユーザーがメール内のリンクをクリックして認証
5. 基本プロフィール情報を入力
6. アカウント作成完了

**代替フロー**:
- 2a. OAuth連携の場合、外部サービスで認証後、即座にアカウント作成

#### UC-002: スキルの登録と証跡追加
**アクター**: 登録済みユーザー
**前提条件**: ログイン済み
**基本フロー**:
1. ユーザーがスキル管理画面にアクセス
2. 「スキルを追加」ボタンをクリック
3. スキル名、カテゴリー、レベル、経験年数を入力
4. （オプション）資格証明書や修了証をアップロード
5. 公開設定を選択（公開/限定公開/非公開）
6. 保存してスキルが登録される

#### UC-003: 企業にプロフィールを共有
**アクター**: 求職中のユーザー
**前提条件**: プロフィールが作成済み
**基本フロー**:
1. ユーザーがアクセス管理画面を開く
2. 「新しいアクセス権限を付与」を選択
3. 企業名またはメールアドレスを入力
4. アクセス範囲（全体/特定項目のみ）を選択
5. 有効期限を設定（1週間/1ヶ月/無期限等）
6. 確認して権限を付与
7. 企業にアクセス用URLが送信される

**事後条件**: 企業がプロフィールを閲覧可能になり、アクセスログが記録される

#### UC-004: GitHub連携で活動を自動取得
**アクター**: エンジニアユーザー
**前提条件**: GitHubアカウント所有
**基本フロー**:
1. ユーザーが外部連携設定を開く
2. GitHub連携を選択
3. GitHubでの認証を実施
4. 連携範囲（公開リポジトリのみ/全て）を選択
5. システムがリポジトリ情報、コントリビューション、使用言語を取得
6. 自動的にスキルや活動ログに反映

**事後条件**: 定期的にGitHub活動が更新される

#### UC-005: 職務経歴書のPDF出力
**アクター**: 求職中のユーザー
**前提条件**: プロフィールとスキル情報が登録済み
**基本フロー**:
1. ユーザーがエクスポート機能を選択
2. 「PDF形式で出力」を選択
3. テンプレートを選択（標準/詳細/簡易等）
4. 含める項目を選択（スキル/プロジェクト/資格等）
5. プレビューを確認
6. ダウンロードボタンをクリック
7. PDFファイルがダウンロードされる

### 5.2 企業ユーザーのユースケース

#### UC-101: 候補者のスキル検索
**アクター**: 採用担当者
**前提条件**: 企業アカウントでログイン済み
**基本フロー**:
1. 採用担当者が候補者検索画面を開く
2. 必要なスキルをフィルター条件に設定
3. 経験年数、レベル等の条件を追加
4. 検索を実行
5. マッチする候補者のリストが表示される
6. 候補者をクリックして公開プロフィールを閲覧
7. 詳細情報が必要な場合、アクセス申請を送信

#### UC-102: 社内スキルマップの作成
**アクター**: 人事担当者
**前提条件**: 社員が自社ドメインで登録済み
**基本フロー**:
1. 人事担当者が組織管理画面にアクセス
2. 所属する社員のリストを確認
3. スキルマップ表示を選択
4. 組織全体または部署別のスキル分布が可視化される
5. 不足スキル、強化スキルを分析
6. 研修計画の立案に活用

### 5.3 AI連携ユースケース

#### UC-201: AIペットとの会話からスキル自動抽出
**アクター**: 個人ユーザー（エンジニア）
**前提条件**: ChatGPTまたはClaudeプラグインが有効化済み、同意取得済み
**基本フロー**:
1. ユーザーがAIペット（ChatGPT/Claude等）とコーディングに関する会話
2. 「Reactのパフォーマンス最適化について教えて」「useMemoの使い方は？」等の質問
3. プラグインがバックグラウンドで会話ログを収集（暗号化して保存）
4. 日次バッチ処理でAI Analyzerが会話内容を分析
5. 「React」「パフォーマンス最適化」「useMemo」等のスキルキーワードを抽出
6. 信頼度スコアを算出（この例：React 0.85, パフォーマンス最適化 0.75）
7. ユーザーに通知「新しいスキルを検出しました：React（信頼度85%）」
8. ユーザーが承認ボタンをクリック
9. スキルがプロフィールに追加され、会話ログが証跡としてリンク
10. 既存の「React」スキルがある場合は使用頻度・習熟度が更新される

**代替フロー**:
- 7a. ユーザーが「拒否」を選択した場合、スキルは追加されず、フィードバックが学習に活用される
- 7b. 信頼度が閾値（例：90%）以上の場合、自動承認ルールに従い自動的に追加される

**事後条件**: 
- スキルプロフィールが更新される
- 検出履歴が記録される
- 次回からの検出精度が向上する

#### UC-202: コード作成ログからスキルレベル推定
**アクター**: エンジニアユーザー
**前提条件**: VSCode拡張機能またはIDEプラグインがインストール済み
**基本フロー**:
1. ユーザーがVSCodeでTypeScriptプロジェクトを開発
2. プラグインが以下を記録：
   - 使用した言語（TypeScript）
   - インポートしたライブラリ（React, Express, Prisma等）
   - 記述したコードパターン（async/await, 型定義等）
   - 作業時間とコード量
3. 週次でAIが1週間分の作業ログを分析
4. 各スキルの使用頻度、コードの複雑度、エラー発生率を評価
5. スキルレベルを推定：
   - TypeScript: レベル4（上級） ← 型システムを高度に活用
   - React: レベル3（中級） ← 基本的なフックの使用
   - Prisma: レベル2（初級） ← 基本的なクエリのみ
6. 成長トレンドグラフを生成
7. 推奨学習コンテンツを提案「Reactのパフォーマンス最適化を学ぶとレベル4に到達できます」

**事後条件**: 
- スキルレベルが更新される
- 成長グラフが更新される
- 学習推奨が提示される

#### UC-203: コミュニティプラグインのインストールと使用
**アクター**: 個人ユーザー
**前提条件**: アカウント登録済み
**基本フロー**:
1. ユーザーがプラグインマーケットにアクセス
2. 「Notion AI連携」プラグインを発見（評価4.5/5.0、1,234インストール）
3. プラグイン詳細を確認：
   - 説明：Notionでの学習ノート、技術メモからスキルを抽出
   - 必要な権限：ログ収集、スキル書き込み、Notion API
   - レビュー：「便利」「Notionユーザーには必須」等
4. 「インストール」ボタンをクリック
5. 権限確認ダイアログが表示される
6. 「許可する」をクリック
7. プラグイン設定画面が表示される
8. Notion APIキーを入力し、連携対象のページを選択
9. 「保存して有効化」をクリック
10. プラグインが有効化され、Notionページの分析が開始される
11. 数分後、検出されたスキル（「データベース設計」「SQL」等）の通知が届く

**事後条件**: 
- プラグインがインストールされ有効化される
- Notionとの連携が確立される
- 定期的にNotionページが分析される

#### UC-204: GitHub活動とAI会話の統合分析
**アクター**: オープンソースコントリビューター
**前提条件**: GitHubプラグインとChatGPTプラグイン両方が有効
**基本フロー**:
1. ユーザーがGitHubでOSSプロジェクトにコントリビュート
2. GitHubプラグインがコミット、PR、Issueコメントを収集
3. 並行して、ChatGPTとのコーディング相談の会話を収集
4. AIが両方のデータソースを統合分析：
   - GitHubから：実際に使用した技術、解決した問題
   - ChatGPTから：学習中の技術、理解度
5. より正確なスキル判定：
   - 「Kubernetes」をChatGPTで質問（学習中） → レベル1-2
   - Kubernetesに関するPRをマージ（実践済み） → レベル3に上方修正
6. 統合レポートを生成：
   - 学習→実践の流れを可視化
   - 効果的な学習パスを特定
   - 次のステップを提案

**事後条件**: 
- より精度の高いスキル評価
- 学習効果の可視化
- パーソナライズされた推奨

#### UC-205: ローカルLLMによるプライベート分析
**アクター**: プライバシー重視ユーザー
**前提条件**: ローカルLLMプラグイン（Ollama連携）がインストール済み
**基本フロー**:
1. ユーザーがプラグイン設定で「ローカル処理のみ」を選択
2. センシティブな業務コードやドキュメントを扱う
3. プラグインがローカルでログを収集
4. ローカルのOllama（Llama 2モデル）でスキル抽出を実行
5. 一切のデータがサーバーに送信されない
6. 抽出されたスキル名とスコアのみがサーバーに保存
7. 元のログはローカルマシンにのみ保持
8. ユーザーが承認したスキルのみプロフィールに追加

**代替フロー**:
- 4a. ローカルLLMでは精度が不十分な場合、ユーザーの選択でクラウドLLMに切り替え可能

**事後条件**: 
- プライバシーが完全に保護される
- センシティブな情報はローカルにのみ保存
- スキルプロファイルは通常通り管理される

#### UC-206: スキル検出のフィードバック学習
**アクター**: 個人ユーザー
**前提条件**: 複数のスキルが検出されている
**基本フロー**:
1. システムが「Docker」スキルを検出（信頼度70%）
2. ユーザーが「拒否」を選択（理由：Dockerの基本コマンドを調べただけ）
3. システムがフィードバックを記録
4. 次回以降、同様のコンテキスト（「Dockerの基本コマンド確認」程度）では検出しない
5. より深い内容（「Dockerfileの最適化」「multi-stage build」等）の時のみ検出
6. ユーザーが「TypeScript」レベル3と検出されたが、「レベル2が適切」と修正
7. システムが習熟度判定基準を調整
8. 他のユーザーにも改善が反映される（プライバシー保護の上で）

**事後条件**: 
- 検出精度が向上
- ユーザー個別の基準が学習される
- グローバルな検出モデルが改善される

#### UC-207: プラグイン開発者のワークフロー
**アクター**: プラグイン開発者
**前提条件**: 開発者アカウント、Plugin Development SDKのインストール
**基本フロー**:
1. 開発者が「Slack連携プラグイン」を開発することを決定
2. Plugin Development SDKを使用してプロジェクトを初期化
   ```bash
   skill-profile-cli plugin create slack-integration
   ```
3. プラグインテンプレートが生成される
4. `plugin.ts`で必要なメソッドを実装：
   - `collectLogs()`: Slack APIから技術的な会話を取得
   - `extractSkills()`: メッセージから技術用語を抽出
5. ローカルでテスト：
   ```bash
   skill-profile-cli plugin test
   ```
6. テストが通過したらプラグインをパッケージ化
7. プラグインマーケットに公開申請
8. レビュープロセス：
   - セキュリティスキャン
   - コードレビュー
   - サンプルデータでのテスト
9. 承認後、マーケットに公開される
10. ユーザーがインストール開始
11. 開発者は使用統計とフィードバックを確認

**事後条件**: 
- 新しいプラグインがエコシステムに追加される
- コミュニティが拡大する
- 開発者が貢献者として認識される

---

## 6. データモデル

### 6.1 主要エンティティ

#### User（ユーザー）
- user_id (PK)
- email
- password_hash
- display_name
- avatar_url
- bio
- location
- website
- created_at
- updated_at

#### Skill（スキル）
- skill_id (PK)
- user_id (FK)
- skill_name
- category
- level (1-5)
- experience_years
- description
- is_public
- created_at
- updated_at

#### Certificate（資格・証明書）
- certificate_id (PK)
- user_id (FK)
- skill_id (FK)
- certificate_name
- issuer
- issue_date
- expiry_date
- credential_id
- credential_url
- file_path
- is_public
- created_at

#### Project（プロジェクト経験）
- project_id (PK)
- user_id (FK)
- project_name
- description
- role
- start_date
- end_date
- team_size
- achievements
- is_public
- created_at
- updated_at

#### ProjectSkill（プロジェクト-スキル関連）
- project_skill_id (PK)
- project_id (FK)
- skill_id (FK)

#### Learning（学習履歴）
- learning_id (PK)
- user_id (FK)
- title
- type (course/book/seminar/etc)
- provider
- completion_date
- duration_hours
- certificate_path
- is_public
- created_at

#### AccessGrant（アクセス権限）
- access_id (PK)
- user_id (FK) -- プロフィール所有者
- grantee_email
- grantee_type (individual/company)
- scope (full/partial)
- expiry_date
- is_active
- created_at
- revoked_at

#### AccessLog（アクセスログ）
- log_id (PK)
- access_id (FK)
- accessed_at
- ip_address
- user_agent
- accessed_items (JSON)

#### AIPlugin（AIプラグイン）
- plugin_id (PK)
- plugin_name
- plugin_type (chatgpt/claude/github/custom/etc)
- version
- author
- description
- repository_url
- documentation_url
- icon_url
- permissions (JSON) -- 必要な権限のリスト
- config_schema (JSON) -- 設定項目のJSONスキーマ
- status (draft/published/deprecated)
- install_count -- インストール数
- rating_average -- 平均評価
- is_official -- 公式プラグインかどうか
- created_at
- updated_at

#### UserPlugin（ユーザー-プラグイン関連）
- user_plugin_id (PK)
- user_id (FK)
- plugin_id (FK)
- config (JSON) -- プラグイン固有の設定（暗号化）
- is_enabled -- 有効/無効
- installed_at
- last_used_at
- updated_at

#### ActivityLog（活動ログ）
- activity_log_id (PK)
- user_id (FK)
- plugin_id (FK) -- どのプラグインが収集したか
- source_type (ai_conversation/code_edit/github_activity/learning/etc)
- content_encrypted (BYTEA) -- 暗号化されたログ内容
- content_hash -- 重複チェック用ハッシュ
- metadata (JSON) -- プラグイン固有のメタデータ
- language -- 言語（ja/en/etc）
- detected_topics (JSON) -- 検出されたトピック
- word_count -- 単語数
- created_at -- ログの発生日時
- collected_at -- ログの収集日時
- processed_at -- 処理完了日時
- ttl_date -- 自動削除予定日

#### DetectedSkill（検出されたスキル）
- detected_skill_id (PK)
- activity_log_id (FK) -- 検出元のログ
- user_id (FK)
- plugin_id (FK)
- skill_name
- skill_category
- confidence_score (DECIMAL 0-1) -- 信頼度スコア
- context_snippet (TEXT) -- 検出された文脈の抜粋
- detection_method (keyword/nlp/ml/etc) -- 検出手法
- related_skills (JSON) -- 関連スキルのリスト
- status (pending/approved/rejected/merged) -- ステータス
- created_at
- user_reviewed_at
- merged_to_skill_id (FK) -- マージ先のスキルID

#### SkillEvidence（スキル証拠）
- evidence_id (PK)
- skill_id (FK)
- detected_skill_id (FK) -- 元の検出スキル
- activity_log_id (FK) -- 証拠となるログ
- evidence_type (detection/usage/certification)
- confidence_contribution (DECIMAL) -- このエビデンスの信頼度への貢献
- created_at

#### AIModel（AIモデル設定）
- model_id (PK)
- user_id (FK)
- plugin_id (FK)
- model_name (gpt-4/claude-3/etc)
- api_key_encrypted (BYTEA) -- 暗号化されたAPIキー
- endpoint_url
- model_config (JSON) -- モデル固有の設定（温度、最大トークン等）
- usage_limit (JSON) -- 使用制限設定
- last_sync_at
- created_at
- updated_at

#### PluginConsent（プラグイン同意管理）
- consent_id (PK)
- user_id (FK)
- plugin_id (FK)
- consent_type (data_collection/data_analysis/data_export/etc)
- is_granted -- 同意済みかどうか
- granted_at
- revoked_at
- consent_version -- 同意バージョン（規約変更追跡用）

#### PluginUsageLog（プラグイン使用ログ）
- usage_log_id (PK)
- user_id (FK)
- plugin_id (FK)
- action_type (collect_logs/extract_skills/config_change/etc)
- items_processed -- 処理したアイテム数
- execution_time_ms -- 実行時間（ミリ秒）
- status (success/error)
- error_message
- created_at

#### SkillDetectionRule（スキル検出ルール）
- rule_id (PK)
- user_id (FK) -- ユーザー固有のルール（NULL=グローバル）
- plugin_id (FK) -- プラグイン固有のルール（NULL=全体）
- rule_type (keyword/regex/ml_model)
- pattern (TEXT) -- パターン定義
- target_skill_name
- target_category
- confidence_modifier (DECIMAL) -- スコア調整値
- is_active
- priority -- ルール適用優先度
- created_at
- updated_at

#### Goal（目標）
- goal_id (PK)
- user_id (FK)
- title
- description
- type (short/medium/long)
- target_date
- status (in_progress/achieved/abandoned)
- created_at
- updated_at

#### ExternalIntegration（外部連携）
- integration_id (PK)
- user_id (FK)
- service_name (github/linkedin/etc)
- external_id
- access_token (encrypted)
- refresh_token (encrypted)
- last_synced_at
- is_active
- created_at

---

## 7. 画面設計

### 7.1 主要画面一覧

1. **認証関連**
   - ログイン画面
   - 新規登録画面
   - パスワードリセット画面

2. **ダッシュボード**
   - 概要ダッシュボード（統計、最近の活動）
   - クイックアクション

3. **プロフィール管理**
   - プロフィール編集画面
   - 公開プロフィール表示画面

4. **スキル管理**
   - スキル一覧・編集画面
   - スキル追加画面
   - 資格・証明書管理画面
   - スキル可視化画面

5. **経験・実績管理**
   - プロジェクト一覧・編集画面
   - 学習履歴管理画面
   - 外部連携設定画面

6. **アクセス制御**
   - 公開設定画面
   - アクセス権限管理画面
   - アクセスログ確認画面

7. **分析・レポート**
   - スキル分析画面
   - 成長トラッキング画面
   - 市場価値分析画面

8. **キャリア支援**
   - 目標設定・管理画面
   - 学習推奨画面
   - 求人マッチング画面

9. **設定**
   - アカウント設定画面
   - プライバシー設定画面
   - 通知設定画面

10. **企業向け画面**
    - 候補者検索画面
    - 社内スキルマップ画面

---

## 8. 外部システム連携

### 8.1 認証プロバイダー
- **Google OAuth 2.0**: Googleアカウントでのログイン
- **GitHub OAuth**: GitHubアカウントでのログイン
- **LinkedIn OAuth**: LinkedInアカウントでのログイン

### 8.2 データ連携
- **GitHub API**: リポジトリ情報、コミット履歴、使用言語統計
- **LinkedIn API**: プロフィール情報、職歴、スキル推奨
- **Stack Overflow API**: レピュテーション、バッジ、質問・回答統計
- **Qiita API**: 投稿記事、いいね数、フォロワー数
- **Zenn API**: 投稿記事、いいね数

### 8.3 学習プラットフォーム
- **Udemy API**: コース修了情報（将来対応）
- **Coursera API**: 修了証情報（将来対応）

### 8.4 通知サービス
- **メール送信**: SendGrid / AWS SES
- **プッシュ通知**: Firebase Cloud Messaging

### 8.5 ストレージ
- **ファイルストレージ**: AWS S3 / Google Cloud Storage
- **CDN**: CloudFront / Cloudflare

---

## 9. 技術スタック（推奨）

### 9.1 フロントエンド
- **フレームワーク**: React 18+ または Vue 3+
- **状態管理**: Redux Toolkit / Zustand / Pinia
- **UIライブラリ**: Material-UI / Ant Design / Tailwind CSS
- **グラフ可視化**: D3.js / Chart.js / Recharts
- **ビルドツール**: Vite / Next.js

### 9.2 バックエンド
- **言語**: Node.js (TypeScript) / Python / Go
- **フレームワーク**: 
  - Node.js: Express / NestJS / Fastify
  - Python: FastAPI / Django
  - Go: Gin / Echo
- **API**: RESTful API + GraphQL（オプション）
- **認証**: Passport.js / Auth0 / JWT

### 9.3 データベース
- **メインDB**: PostgreSQL 14+ / MySQL 8+
- **キャッシュ**: Redis 7+
- **検索**: Elasticsearch 8+ / OpenSearch
- **ドキュメントDB**: MongoDB（オプション）

### 9.4 インフラ
- **クラウド**: AWS / Google Cloud / Azure
- **コンテナ**: Docker + Kubernetes
- **CI/CD**: GitHub Actions / GitLab CI / CircleCI
- **モニタリング**: Datadog / New Relic / Prometheus + Grafana
- **ログ管理**: ELK Stack / CloudWatch Logs

### 9.5 開発ツール
- **バージョン管理**: Git / GitHub
- **API設計**: OpenAPI (Swagger)
- **テスト**: Jest / Pytest / Go Test
- **コード品質**: ESLint / Prettier / SonarQube

### 9.6 AI/ML関連技術（透明性・説明可能性重視）

**重要原則**: すべてのAI/MLモデルとアルゴリズムはオープンソースを使用し、コードを公開する。

#### 9.6.1 説明可能AI（XAI）
- **SHAP (SHapley Additive exPlanations)**
  - 各特徴量の予測への寄与度を計算
  - 「なぜこの推奨なのか」を数値で説明
  - Tree-based / Deep Learning対応
  
- **LIME (Local Interpretable Model-agnostic Explanations)**
  - 個別予測の局所的な説明
  - モデル非依存の説明手法
  
- **InterpretML (Microsoft)**
  - ガラスボックスモデル（EBM等）
  - 可視化ツール充実
  
- **Fairlearn (Microsoft)**
  - 公平性の評価・改善
  - バイアス検出・軽減
  - 複数の公平性指標

#### 9.6.2 LLM統合フレームワーク
- **LangChain**: 
  - マルチLLM対応の統合フレームワーク
  - チェーン構築、プロンプトテンプレート管理
  - メモリ管理、コンテキスト維持
  - エージェント機能による自律的タスク実行
  
- **LlamaIndex**: 
  - ドキュメントインデックス作成
  - RAG（Retrieval-Augmented Generation）実装
  - 効率的なデータ取得とLLM連携

#### 9.6.2 LLM SDK
- **OpenAI SDK** (Python / TypeScript)
  - GPT-4、GPT-3.5-turboとの連携
  - 関数呼び出し（Function Calling）
  - ストリーミングレスポンス
  
- **Anthropic SDK** (Python / TypeScript)
  - Claude 3シリーズとの連携
  - 長文コンテキスト処理（100k+ tokens）
  - Constitutional AIによる安全な応答
  
- **Google Generative AI SDK**
  - Gemini Proとの連携
  - マルチモーダル入力対応

#### 9.6.3 ベクトルデータベース
- **ChromaDB** (推奨)
  - オープンソース、セルフホスト可能
  - Pythonネイティブ、高速
  - メタデータフィルタリング
  - 組み込みモード対応
  
- **Pinecone** (オプション)
  - マネージドサービス
  - 高速・大規模ベクトル検索
  - リアルタイムインデックス更新
  
- **Weaviate** (オプション)
  - グラフ構造のサポート
  - ハイブリッド検索（ベクトル+キーワード）
  - GraphQL API

- **Milvus** (大規模向け)
  - 数十億スケールのベクトル対応
  - 分散アーキテクチャ
  - GPU加速サポート

#### 9.6.4 埋め込みモデル
- **OpenAI Embeddings**
  - text-embedding-3-small/large
  - 多言語対応、高品質
  
- **Sentence Transformers**
  - オープンソース、ローカル実行可能
  - all-MiniLM-L6-v2（軽量）
  - multilingual-e5-large（多言語）
  
- **Cohere Embed**
  - 多言語埋め込み
  - セマンティック検索最適化

#### 9.6.5 自然言語処理
- **spaCy**
  - 固有表現抽出（NER）
  - 品詞タグ付け
  - 依存構造解析
  - 多言語モデル（ja_core_news_sm等）
  
- **Transformers (Hugging Face)**
  - 事前学習済みモデルの利用
  - ファインチューニング
  - トークン分類、テキスト分類
  
- **NLTK / TextBlob**
  - 基本的なテキスト処理
  - センチメント分析
  - キーワード抽出

#### 9.6.6 ローカルLLM実行環境
- **Ollama**
  - 簡単なローカルLLM実行
  - Llama 2、Mistral等のモデル対応
  - REST API提供
  
- **LM Studio**
  - GUIベースのLLM管理
  - GGUF形式モデル対応
  - ローカルAPI Server
  
- **llama.cpp**
  - C++実装の高速推論
  - 量子化モデル対応
  - 低リソース環境での実行

#### 9.6.7 メッセージキュー・ストリーミング
- **Apache Kafka**
  - 大規模ログストリーミング
  - 耐久性のあるメッセージキュー
  - リアルタイムデータパイプライン
  
- **RabbitMQ**
  - 軽量メッセージブローカー
  - 柔軟なルーティング
  - タスクキュー実装
  
- **Redis Streams**
  - Redisベースのストリーミング
  - シンプルな実装
  - Pub/Sub機能

#### 9.6.8 バッチ処理・ワークフロー
- **Apache Airflow**
  - ワークフローオーケストレーション
  - DAGベースのタスク定義
  - スケジューリング、モニタリング
  
- **Celery**
  - 分散タスクキュー
  - 非同期処理
  - Python統合
  
- **Temporal**
  - 耐障害性ワークフローエンジン
  - 長時間実行タスクのサポート
  - 状態管理

#### 9.6.9 モニタリング・可観測性
- **MLflow**
  - 機械学習実験トラッキング
  - モデルレジストリ
  - デプロイメント管理
  
- **Weights & Biases**
  - 実験管理
  - モデルパフォーマンス可視化
  - ハイパーパラメータ調整
  
- **LangSmith**
  - LLMアプリケーションデバッグ
  - プロンプトエンジニアリング支援
  - トレーシング

#### 9.6.10 プラグインシステム技術
- **WebAssembly (WASM)**
  - プラグインのサンドボックス実行
  - 言語非依存
  - セキュアな隔離環境
  
- **gRPC**
  - プラグイン間通信
  - 高速バイナリプロトコル
  - ストリーミングサポート
  
- **Protocol Buffers**
  - 構造化データのシリアライゼーション
  - 型安全なAPI定義
  - 多言語対応

---

## 10. セキュリティ対策

### 10.1 認証・認可
- OAuth 2.0 / OpenID Connectの実装
- JWT（JSON Web Token）による認証
- リフレッシュトークンの安全な管理
- RBAC（Role-Based Access Control）の実装

### 10.2 データ保護
- 保存データのAES-256暗号化
- パスワードのbcrypt/Argon2ハッシュ化
- 機密情報（APIキー等）の環境変数管理
- データベース接続情報の暗号化

### 10.3 通信セキュリティ
- TLS 1.3での通信暗号化
- HSTS（HTTP Strict Transport Security）の有効化
- CSP（Content Security Policy）の設定

### 10.4 脆弱性対策
- SQLインジェクション対策（パラメータ化クエリ）
- XSS対策（入力サニタイゼーション）
- CSRF対策（トークン検証）
- クリックジャッキング対策（X-Frame-Options）
- レート制限によるDDoS対策

### 10.5 監査・ログ
- 全アクセスのログ記録
- 個人情報アクセスの監査ログ
- 異常アクセスの検知・アラート
- ログの改ざん防止

### 10.6 AIログ処理のセキュリティ

#### 10.6.1 ログデータの保護
- **エンドツーエンド暗号化**: 収集から保存まで常に暗号化
  - 収集時: クライアント側で暗号化してから送信
  - 転送時: TLS 1.3による通信暗号化
  - 保存時: AES-256-GCMによるデータベース暗号化
  - 鍵管理: KMS（Key Management Service）による鍵の管理
  
- **ローカル処理オプション**
  - センシティブなログはローカルでのみ処理可能
  - ローカルLLMとの連携サポート
  - オンデバイスでのスキル抽出機能
  - サーバー送信前のデータフィルタリング

- **データ最小化**
  - 必要最小限のログのみ収集
  - 収集時に不要な個人情報を自動除外
  - 差分更新による重複データの削減
  - 圧縮アルゴリズムによるストレージ最適化

#### 10.6.2 同意管理
- **きめ細かい同意制御**
  - プラグイン単位での同意管理
  - ログタイプ別の収集許可設定
  - データ用途別の同意（分析用、学習用等）
  - 同意バージョン管理（規約変更追跡）

- **即時同意撤回**
  - ワンクリックで同意を撤回可能
  - 撤回後の即時データ収集停止
  - 既存データの削除または匿名化
  - 撤回履歴の記録

- **透明性の確保**
  - 何が収集されたかの詳細表示
  - データがどう使われたかのレポート
  - プラグインのデータアクセスログ公開
  - 第三者提供の有無の明示

#### 10.6.3 匿名化・マスキング
- **自動匿名化処理**
  - 個人情報（名前、メール、電話等）の自動検出とマスキング
  - IPアドレスの部分マスキング
  - 固有識別子のハッシュ化
  - 地理情報の粗粒度化（市区町村レベル以上）

- **差分プライバシー**
  - 統計情報生成時の差分プライバシー適用
  - ノイズ注入による個人識別防止
  - k-匿名性の確保

#### 10.6.4 アクセス制御
- **プラグイン権限管理**
  - 最小権限の原則（Principle of Least Privilege）
  - プラグインごとの権限スコープ定義
  - 動的権限要求（必要時のみ追加権限要求）
  - 権限昇格の監視

- **サンドボックス実行**
  - WebAssemblyによるプラグイン隔離実行
  - リソース使用制限（CPU、メモリ、ネットワーク）
  - ファイルシステムアクセスの制限
  - ネットワークアクセスの制限

#### 10.6.5 データ保持・削除
- **自動削除ポリシー**
  - ユーザー設定可能な保持期間（7日～1年）
  - 期限到達時の自動削除
  - 削除予定の事前通知
  - 削除履歴の記録

- **完全削除の保証**
  - 論理削除と物理削除の二段階削除
  - バックアップからの削除
  - 暗号化鍵の破棄による復号不可能化
  - 削除証明の発行

- **保持期間の例外**
  - 法的要求による保持
  - セキュリティインシデント調査用
  - 明示的なユーザー保存リクエスト

#### 10.6.6 セキュリティ監査
- **継続的監視**
  - プラグインの異常動作検知
  - 大量データアクセスのアラート
  - 権限外アクセス試行の記録
  - リアルタイムセキュリティダッシュボード

- **定期監査**
  - 四半期ごとのセキュリティレビュー
  - プラグインコードの静的解析
  - 脆弱性スキャン
  - ペネトレーションテスト

#### 10.6.7 インシデント対応
- **インシデント検知**
  - 異常パターンの自動検知
  - セキュリティイベントのリアルタイム分析
  - 外部脅威インテリジェンスとの連携

- **対応手順**
  - インシデント発生時の自動隔離
  - 影響範囲の特定
  - ユーザーへの迅速な通知
  - 復旧プランの実行
  - インシデント報告書の作成

---

## 11. プライバシー・コンプライアンス

### 11.1 GDPR対応
- 明示的な同意取得
- データポータビリティ（データエクスポート）
- 忘れられる権利（データ完全削除）
- データ処理の透明性確保
- DPO（データ保護責任者）の設置

### 11.2 個人情報保護法対応
- 利用目的の明示
- 適切な安全管理措置
- 第三者提供時の同意取得
- 開示請求への対応手順

### 11.3 Cookie管理
- Cookie使用の明示的同意
- 必須Cookie/任意Cookieの区別
- Cookie設定の変更機能

---

## 12. 制約事項・前提条件

### 12.1 技術的制約
- ファイルアップロードは1ファイル10MBまで
- PDF出力は最大100ページまで
- API呼び出しは1ユーザーあたり1時間1000リクエストまで
- 外部API連携は各サービスのレート制限に準拠

### 12.2 運用制約
- メンテナンスウィンドウ：毎週日曜日2:00-4:00（JST）
- データバックアップ保持期間：30日間
- アクセスログ保持期間：90日間

### 12.3 法的制約
- 13歳未満のユーザーは利用不可
- 特定の国・地域からのアクセス制限あり（要確認）
- 個人情報の国外移転時の対応

---

## 13. リスク管理

### 13.1 技術リスク
| リスク | 影響 | 対策 |
|--------|------|------|
| データベース障害 | 高 | マスター・スレーブ構成、自動フェイルオーバー |
| 大量アクセスによるサーバーダウン | 高 | オートスケーリング、CDN活用 |
| 外部API障害 | 中 | タイムアウト設定、フォールバック処理 |
| データ破損 | 高 | 定期バックアップ、トランザクション管理 |

### 13.2 セキュリティリスク
| リスク | 影響 | 対策 |
|--------|------|------|
| 個人情報漏洩 | 極高 | 暗号化、アクセス制御、監査ログ |
| 不正アクセス | 高 | 二段階認証、レート制限、WAF導入 |
| DDoS攻撃 | 中 | CDN、レート制限、異常検知 |

### 13.3 運用リスク
| リスク | 影響 | 対策 |
|--------|------|------|
| デプロイミス | 中 | CI/CD自動化、ステージング環境テスト |
| 設定ミス | 中 | Infrastructure as Code、レビュープロセス |
| 監視不足 | 中 | 包括的モニタリング、アラート設定 |

---

## 14. 成功指標（KPI）

### 14.1 ユーザー指標
- 月間アクティブユーザー（MAU）
- ユーザー登録数
- ユーザー継続率（リテンション）
- 平均セッション時間

### 14.2 機能利用指標
- スキル登録数（1ユーザーあたり）
- プロフィール公開率
- 外部連携利用率
- データエクスポート回数

### 14.3 ビジネス指標
- 企業アカウント登録数
- プロフィール閲覧数
- アクセス権限付与数
- コンバージョン率（求人応募等）

### 14.4 技術指標
- システム稼働率
- ページ読み込み時間
- エラー発生率
- API応答時間

---

## 15. 用語集

| 用語 | 説明 |
|------|------|
| スキルプロファイル | 個人のスキル、経験、実績を体系的にまとめたデジタルプロフィール |
| Ownership | データに対する所有権と管理権限 |
| アクセスグラント | 特定の人・組織にプロフィール閲覧を許可する権限 |
| スキル証跡 | スキルを客観的に証明する資格、証明書、活動ログ等 |
| データポータビリティ | データを他のサービスに移行可能な形式で取得できること |
| スキルギャップ | 現在のスキルと目標とするスキルとの差異 |
| レーダーチャート | 複数のスキル領域をクモの巣状に可視化したグラフ |
| OAuth 2.0 | 第三者アプリケーションによる安全なアクセス許可の仕組み |
| JWT | JSON形式のトークンベース認証方式 |
| GDPR | EU一般データ保護規則 |

---

## 16. 参考資料

### 16.1 関連法規
- EU一般データ保護規則（GDPR）
- 個人情報の保護に関する法律（個人情報保護法）
- 不正アクセス行為の禁止等に関する法律

### 16.2 技術標準
- OAuth 2.0 (RFC 6749)
- OpenID Connect
- JSON Web Token (RFC 7519)
- WCAG 2.1 (Web Content Accessibility Guidelines)

### 16.3 API仕様
- GitHub REST API v3
- GitHub GraphQL API v4
- LinkedIn API Documentation
- Stack Overflow API Documentation

---

## 17. 変更履歴

| バージョン | 日付 | 変更内容 | 作成者 |
|-----------|------|---------|--------|
| 1.0 | 2026-02-13 | 初版作成 | @hiroyuki |

---

## 18. 承認

| 役割 | 氏名 | 承認日 | 署名 |
|------|------|--------|------|
| プロジェクトマネージャー | | | |
| 技術責任者 | | | |
| セキュリティ責任者 | | | |
| 法務担当 | | | |

---

**文書管理情報**
- 文書ID: REQ-SKILLPROFILE-001
- 作成日: 2026-02-13
- 最終更新: 2026-02-13
- 機密区分: 社外秘
